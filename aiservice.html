<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Auth0 Login</title>
  <script src="https://cdn.auth0.com/js/auth0/9.28.0/auth0.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex flex-col items-center justify-center min-h-screen">
  <h1 class="text-4xl font-bold text-gray-800 mb-8">Test Our New Demo App Builder</h1>
  <div id="login-container" class="bg-white p-6 rounded-lg shadow-lg">
    <button id="login-btn" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Login</button>
  </div>
  <div id="user-profile" class="bg-white p-6 rounded-lg shadow-lg" style="display: none;">
    <h2 class="text-2xl font-semibold text-gray-800">Welcome, <span id="user-name"></span>!</h2>
    <button id="logout-btn" class="mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">Logout</button>
  </div>

  <script>
    if (typeof Auth0 === 'undefined') {
      console.error('Auth0 library not loaded');
    } else {
      const auth0 = new Auth0.WebAuth({
        domain: 'dev-p0aqlkikrevjgei2.us.auth0.com', // Replace with your correct domain
        clientID: 'FSeaR8GsDe3AquJVOOwE5zmYZq6LDrxF', // Replace with your Auth0 client ID
        redirectUri: window.location.href,
        responseType: 'token id_token',
        scope: 'openid profile'
      });

      const loginBtn = document.getElementById('login-btn');
      const logoutBtn = document.getElementById('logout-btn');
      const loginContainer = document.getElementById('login-container');
      const userProfile = document.getElementById('user-profile');
      const userName = document.getElementById('user-name');

      loginBtn.addEventListener('click', () => {
        auth0.authorize();
      });

      logoutBtn.addEventListener('click', () => {
        auth0.logout({ returnTo: window.location.href });
        loginContainer.style.display = 'block';
        userProfile.style.display = 'none';
      });

      function handleAuthentication() {
        auth0.parseHash((err, authResult) => {
          if (err) {
            console.error('Authentication error:', err);
            return;
          }
          if (authResult && authResult.accessToken && authResult.idToken) {
            auth0.client.userInfo(authResult.accessToken, (err, user) => {
              if (err) {
                console.error('User info error:', err);
                return;
              }
              userName.textContent = user.name;
              loginContainer.style.display = 'none';
              userProfile.style.display = 'block';
            });
          }
        });
      }

      window.onload = handleAuthentication;
    }
  </script>
</body>
</html>