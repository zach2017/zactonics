<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Encoding & Decoding Quiz</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .fade-in { animation: fadeIn 0.5s ease-in; }
    @keyframes fadeIn { from {opacity:0; transform: translateY(10px);} to {opacity:1; transform: translateY(0);} }
  </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-indigo-900 to-blue-900 min-h-screen text-white">
  <div class="container mx-auto px-4 py-8 max-w-4xl">
    <!-- Header -->
    <div class="text-center mb-8">
      <h1 class="text-4xl font-bold mb-2 bg-gradient-to-r from-cyan-400 to-violet-400 bg-clip-text text-transparent">
        üîê Encoding & Decoding Quiz
      </h1>
      <p class="text-gray-300 mb-6 leading-relaxed">
        Convert data across formats‚Äîdecimal, hexadecimal, octal, HTML entities, Base64, and binary.
        Practice quick transformations like you‚Äôd do in <span class="text-teal-300">Cryptii</span> or <span class="text-purple-300">CyberChef</span>.
      </p>

      <div class="flex flex-wrap gap-2 mb-6 justify-center">
        <span class="px-3 py-1 bg-green-500/20 text-green-300 rounded-full text-sm border border-green-500/30">Hex ‚Üî Dec</span>
        <span class="px-3 py-1 bg-blue-500/20 text-blue-300 rounded-full text-sm border border-blue-500/30">Binary</span>
        <span class="px-3 py-1 bg-purple-500/20 text-purple-300 rounded-full text-sm border border-purple-500/30">Base64</span>
        <span class="px-3 py-1 bg-amber-500/20 text-amber-300 rounded-full text-sm border border-amber-500/30">Octal</span>
        <span class="px-3 py-1 bg-rose-500/20 text-rose-300 rounded-full text-sm border border-rose-500/30">HTML Entities</span>
      </div>
    </div>

    <!-- Score / Controls -->
    <div class="bg-black/30 rounded-lg p-4 mb-6 backdrop-blur-sm border border-gray-700">
      <div class="flex flex-wrap gap-4 justify-between items-center">
        <div class="text-lg">
          <span class="text-green-400">Score: </span><span id="score" class="font-bold">0</span>
        </div>
        <div class="text-lg">
          <span class="text-blue-400">Question: </span>
          <span id="currentQuestion" class="font-bold">1</span> /
          <span id="totalQuestions" class="font-bold">12</span>
        </div>
        <button id="resetBtn" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg transition-colors">
          Reset Quiz
        </button>
      </div>
    </div>

    <!-- Quiz -->
    <div id="quizContainer" class="bg-black/40 rounded-xl p-6 backdrop-blur-sm border border-gray-600 shadow-2xl">
      <div id="questionCard" class="mb-6">
        <h2 class="text-2xl font-semibold mb-4 text-cyan-300" id="questionTitle">Question 1</h2>
        <div class="bg-gray-800/50 rounded-lg p-4 mb-4">
          <p id="questionText" class="text-lg"></p>
        </div>
      </div>

      <div class="mb-6">
        <label for="answerInput" class="block text-sm font-medium text-gray-300 mb-2">Your Answer:</label>
        <input
          type="text"
          id="answerInput"
          class="w-full px-4 py-3 bg-gray-800/70 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-gray-400"
          placeholder="Enter your answer here‚Ä¶ (e.g., 2A, 42, HELLO, &lt;)"
        />
      </div>

      <div class="flex gap-4 mb-6">
        <button id="submitBtn" class="flex-1 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105">
          Submit Answer
        </button>
        <button id="hintBtn" class="flex-1 bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700 px-6 py-3 rounded-lg font-semibold transition-all transform hover:scale-105">
          Get Hint
        </button>
        <button id="skipBtn" class="bg-gray-600 hover:bg-gray-700 px-6 py-3 rounded-lg font-semibold transition-colors">
          Skip
        </button>
      </div>

      <div id="feedbackArea" class="hidden">
        <div class="bg-gray-800/70 rounded-lg p-4 border-l-4 border-blue-500">
          <h3 class="font-semibold mb-2 text-blue-300">Feedback:</h3>
          <p id="feedbackText" class="text-gray-300 whitespace-pre-wrap"></p>
        </div>
      </div>

      <button id="nextBtn" class="hidden w-full bg-green-600 hover:bg-green-700 px-6 py-3 rounded-lg font-semibold mt-4 transition-all transform hover:scale-105">
        Next Question ‚Üí
      </button>
    </div>

    <!-- Results -->
    <div id="resultsScreen" class="hidden bg-black/40 rounded-xl p-8 backdrop-blur-sm border border-gray-600 shadow-2xl text-center">
      <h2 class="text-3xl font-bold mb-4 text-cyan-300">Quiz Complete! üéâ</h2>
      <div class="text-6xl font-bold mb-4" id="finalScore">0/36</div>
      <p class="text-xl mb-6 text-gray-300" id="scoreMessage"></p>
      <div class="bg-gray-800/50 rounded-lg p-4 mb-6">
        <h3 class="font-semibold mb-2 text-purple-300">Performance Breakdown:</h3>
        <div id="performanceStats" class="text-left"></div>
      </div>
      <button id="restartBtn" class="bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105">
        Take Quiz Again
      </button>
    </div>
  </div>

  <script>
    // ==========================
    // Quiz Data (Encoding/Decoding)
    // Scoring: 1st try=3 pts, 2nd=2 pts, 3rd=1 pt
    // ==========================
    const questions = [
      {
        id: 1,
        question: "Convert decimal 42 to hexadecimal (uppercase, no 0x).",
        answer: "2A",
        hint: "Divide by 16: 42 = 2 remainder 10 (A).",
        steps: "1) 42 / 16 = 2 remainder 10\n2) 10 ‚Üí 'A'\n3) Hex = 2A",
        explanation: "42‚ÇÅ‚ÇÄ = 2A‚ÇÅ‚ÇÜ."
      },
      {
        id: 2,
        question: "Convert hexadecimal 2F to decimal.",
        answer: "47",
        hint: "2F‚ÇÅ‚ÇÜ = (2 √ó 16) + 15.",
        steps: "1) 'F' = 15\n2) 2√ó16 + 15 = 32 + 15\n3) = 47",
        explanation: "2F‚ÇÅ‚ÇÜ = 47‚ÇÅ‚ÇÄ."
      },
      {
        id: 3,
        question: "Convert binary 101101 to decimal.",
        answer: "45",
        hint: "Weights: 32+8+4+1.",
        steps: "1) 101101 ‚Üí 1*32 + 0*16 + 1*8 + 1*4 + 0*2 + 1*1\n2) 32+8+4+1=45\n3) Answer = 45",
        explanation: "101101‚ÇÇ = 45‚ÇÅ‚ÇÄ."
      },
      {
        id: 4,
        question: "Convert octal 57 to decimal.",
        answer: "47",
        hint: "5√ó8 + 7.",
        steps: "1) Octal base 8\n2) 5√ó8 + 7 = 40 + 7\n3) = 47",
        explanation: "57‚Çà = 47‚ÇÅ‚ÇÄ."
      },
      {
        id: 5,
        question: "Decode Base64: SGVsbG8=",
        answer: "HELLO",
        hint: "Classic example; expect 5 letters.",
        steps: "1) Use a Base64 decoder (CyberChef/Cryptii)\n2) SGVsbG8= ‚Üí 'Hello'\n3) Uppercase answer as HELLO",
        explanation: "SGVsbG8= decodes to 'Hello'. (Quiz normalizes to uppercase ‚Üí HELLO.)"
      },
      {
        id: 6,
        question: "Encode the ASCII string OK in Base64 (uppercase).",
        answer: "T0s=",
        hint: "Two letters ‚Üí one '=' padding.",
        steps: "1) 'OK' ‚Üí bytes 4F 4B\n2) Base64 ‚Üí T0s=\n3) Use '=' padding for 2 bytes",
        explanation: "OK ‚Üí T0s= in Base64."
      },
      {
        id: 7,
        question: "What character does the HTML entity &amp;lt; represent?",
        answer: "<",
        hint: "It's used inside HTML to show an opening angle bracket.",
        steps: "1) &lt; ‚Üí literal '<'\n2) It's the less-than sign\n3) Enter just the character",
        explanation: "&lt; renders as '<'."
      },
      {
        id: 8,
        question: "Convert decimal 255 to binary (no spaces).",
        answer: "11111111",
        hint: "All ones in a single byte.",
        steps: "1) 255 = 2^8 - 1\n2) Binary of 255 is eight 1s\n3) 11111111",
        explanation: "255‚ÇÅ‚ÇÄ = 11111111‚ÇÇ."
      },
      {
        id: 9,
        question: "Convert hex FF to decimal.",
        answer: "255",
        hint: "F=15; FF = 15√ó16 + 15.",
        steps: "1) 15√ó16 + 15\n2) 240 + 15 = 255\n3) Answer 255",
        explanation: "FF‚ÇÅ‚ÇÜ = 255‚ÇÅ‚ÇÄ."
      },
      {
        id: 10,
        question: "Convert decimal 65 to ASCII character (uppercase).",
        answer: "A",
        hint: "Think of the start of uppercase letters.",
        steps: "1) ASCII 65 = 'A'\n2) Enter the letter only\n3) Case matters ‚Üí A",
        explanation: "65‚ÇÅ‚ÇÄ corresponds to 'A'."
      },
      {
        id: 11,
        question: "Convert the character ' ' (space) to hex byte value (uppercase, two digits).",
        answer: "20",
        hint: "ASCII space in hex starts with 2.",
        steps: "1) Space ASCII decimal = 32\n2) 32‚ÇÅ‚ÇÄ ‚Üí 20‚ÇÅ‚ÇÜ\n3) Two hex digits ‚Üí 20",
        explanation: "Space ‚Üí 0x20."
      },
      {
        id: 12,
        question: "Which tool can quickly convert between formats like hex, Base64, and binary: CyberChef or Paint?",
        answer: "CYBERCHEF",
        hint: "The one built for data transformations.",
        steps: "1) CyberChef = conversions & recipes\n2) Paint = image editor\n3) Answer CYBERCHEF",
        explanation: "CyberChef is designed for quick data transformations."
      }
    ];

    // --------------------------
    // State (localStorage key is unique to this quiz)
    // --------------------------
    let gameData = {
      currentQuestion: 0,
      score: 0,
      attempts: {},
      questionStats: {}
    };

    function loadGameData() {
      try {
        const saved = localStorage.getItem('encDecQuizData');
        if (saved) gameData = { ...gameData, ...JSON.parse(saved) };
      } catch(e) { console.log('Using in-memory storage'); }
    }
    function saveGameData() {
      try { localStorage.setItem('encDecQuizData', JSON.stringify(gameData)); } catch(e) {}
    }

    // --------------------------
    // DOM
    // --------------------------
    const elements = {
      score: document.getElementById('score'),
      currentQuestion: document.getElementById('currentQuestion'),
      totalQuestions: document.getElementById('totalQuestions'),
      questionTitle: document.getElementById('questionTitle'),
      questionText: document.getElementById('questionText'),
      answerInput: document.getElementById('answerInput'),
      submitBtn: document.getElementById('submitBtn'),
      hintBtn: document.getElementById('hintBtn'),
      skipBtn: document.getElementById('skipBtn'),
      nextBtn: document.getElementById('nextBtn'),
      feedbackArea: document.getElementById('feedbackArea'),
      feedbackText: document.getElementById('feedbackText'),
      quizContainer: document.getElementById('quizContainer'),
      resultsScreen: document.getElementById('resultsScreen'),
      finalScore: document.getElementById('finalScore'),
      scoreMessage: document.getElementById('scoreMessage'),
      performanceStats: document.getElementById('performanceStats'),
      resetBtn: document.getElementById('resetBtn'),
      restartBtn: document.getElementById('restartBtn')
    };

    // --------------------------
    // Init
    // --------------------------
    function initializeQuiz() {
      loadGameData();
      elements.totalQuestions.textContent = questions.length;
      displayQuestion();
      updateDisplay();
    }

    function displayQuestion() {
      const question = questions[gameData.currentQuestion];
      if (!question) { showResults(); return; }

      elements.questionTitle.textContent = `Question ${gameData.currentQuestion + 1}`;
      elements.questionText.textContent = question.question;
      elements.answerInput.value = '';
      elements.answerInput.disabled = false;
      elements.answerInput.focus();

      elements.feedbackArea.classList.add('hidden');
      elements.nextBtn.classList.add('hidden');
      elements.submitBtn.classList.remove('hidden');

      if (!gameData.attempts[question.id]) gameData.attempts[question.id] = 0;
    }

    function updateDisplay() {
      elements.score.textContent = gameData.score;
      elements.currentQuestion.textContent = gameData.currentQuestion + 1;
    }

    function showFeedback(message, type) {
      elements.feedbackText.textContent = message;
      elements.feedbackArea.classList.remove('hidden');
      elements.feedbackArea.classList.add('fade-in');

      const borderColor = { success: 'border-green-500', error: 'border-red-500', hint: 'border-yellow-500' }[type] || 'border-blue-500';
      elements.feedbackArea.querySelector('div').className = `bg-gray-800/70 rounded-lg p-4 border-l-4 ${borderColor}`;
    }

    function normalized(input) {
      // Uppercase for letters; leave symbols as-is. Trim whitespace.
      return input.trim().toUpperCase();
    }

    function submitAnswer() {
      const q = questions[gameData.currentQuestion];
      const userAnswerRaw = elements.answerInput.value;
      const userAnswer = normalized(userAnswerRaw);
      const correctAnswer = normalized(q.answer);

      gameData.attempts[q.id]++;

      if (userAnswer === correctAnswer) {
        const points = Math.max(1, 4 - gameData.attempts[q.id]); // 1st=3, 2nd=2, 3rd+=1
        gameData.score += points;
        gameData.questionStats[q.id] = { correct: true, attempts: gameData.attempts[q.id], points };
        showFeedback(`‚úÖ Correct! You earned ${points} points. ${q.explanation}`, 'success');
        elements.nextBtn.classList.remove('hidden');
        elements.submitBtn.classList.add('hidden');
        elements.answerInput.disabled = true;
      } else {
        gameData.questionStats[q.id] = { correct: false, attempts: gameData.attempts[q.id], points: 0 };
        if (gameData.attempts[q.id] >= 3) {
          showFeedback(`‚ùå Incorrect. The correct answer is: ${q.answer}. ${q.explanation}`, 'error');
          elements.nextBtn.classList.remove('hidden');
          elements.submitBtn.classList.add('hidden');
          elements.answerInput.disabled = true;
        } else {
          showFeedback(`‚ùå Incorrect. Try again! (Attempt ${gameData.attempts[q.id]}/3)`, 'error');
        }
      }

      updateDisplay();
      saveGameData();
    }

    function showHint() {
      const q = questions[gameData.currentQuestion];
      const attempts = gameData.attempts[q.id];

      let hintText;
      if (attempts === 0) {
        hintText = `üí° Hint: ${q.hint}`;
      } else if (attempts === 1) {
        hintText = `üìã Detailed Steps:\n${q.steps}`;
      } else {
        hintText = `üìù Answer: ${q.answer}\n\n${q.explanation}`;
        elements.nextBtn.classList.remove('hidden');
        elements.submitBtn.classList.add('hidden');
        elements.answerInput.disabled = true;
      }

      showFeedback(hintText, 'hint');

      if (attempts < 3) {
        gameData.attempts[q.id]++;
        saveGameData();
      }
    }

    function skipQuestion() {
      const q = questions[gameData.currentQuestion];
      gameData.questionStats[q.id] = {
        correct: false,
        attempts: gameData.attempts[q.id] || 0,
        points: 0,
        skipped: true
      };
      nextQuestion();
    }

    function nextQuestion() {
      gameData.currentQuestion++;
      if (gameData.currentQuestion < questions.length) {
        displayQuestion();
        updateDisplay();
      } else {
        showResults();
      }
      saveGameData();
    }

    function showResults() {
      elements.quizContainer.classList.add('hidden');
      elements.resultsScreen.classList.remove('hidden');

      const totalPossibleScore = questions.length * 3;
      const percentage = Math.round((gameData.score / totalPossibleScore) * 100);

      elements.finalScore.textContent = `${gameData.score}/${totalPossibleScore}`;

      let message;
      if (percentage >= 90) message = "üèÜ Conversion Master! Lightning-fast with formats.";
      else if (percentage >= 75) message = "üåü Great work! Strong encoding/decoding skills.";
      else if (percentage >= 60) message = "üëç Good job‚Äîpractice Base64 and numeral bases.";
      else if (percentage >= 40) message = "üìö Keep going‚Äîreview hex/dec/bin conversions.";
      else message = "üîÅ Try again with CyberChef or Cryptii beside you!";

      elements.scoreMessage.textContent = message;

      let statsHtml = '';
      let correctCount = 0;
      let skippedCount = 0;

      questions.forEach((q, i) => {
        const stat = gameData.questionStats[q.id];
        if (stat) {
          if (stat.correct) correctCount++;
          if (stat.skipped) skippedCount++;
          const status = stat.correct ? '‚úÖ' : (stat.skipped ? '‚è≠Ô∏è' : '‚ùå');
          const points = stat.points || 0;
          const attempts = stat.attempts || 0;
          statsHtml += `<div class="flex justify-between py-1">
            <span>Q${i + 1}: ${status}</span>
            <span>${points} pts (${attempts} attempts)</span>
          </div>`;
        }
      });

      statsHtml += `<hr class="my-2 border-gray-600">`;
      statsHtml += `<div class="flex justify-between font-semibold">
        <span>Correct: ${correctCount}/${questions.length}</span>
        <span>Skipped: ${skippedCount}</span>
      </div>`;

      elements.performanceStats.innerHTML = statsHtml;
    }

    function resetQuiz() {
      gameData = { currentQuestion: 0, score: 0, attempts: {}, questionStats: {} };
      saveGameData();
      elements.resultsScreen.classList.add('hidden');
      elements.quizContainer.classList.remove('hidden');
      displayQuestion();
      updateDisplay();
    }

    // Events
    elements.submitBtn.addEventListener('click', submitAnswer);
    elements.hintBtn.addEventListener('click', showHint);
    elements.skipBtn.addEventListener('click', skipQuestion);
    elements.nextBtn.addEventListener('click', nextQuestion);
    elements.resetBtn.addEventListener('click', resetQuiz);
    elements.restartBtn.addEventListener('click', resetQuiz);
    elements.answerInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && !elements.submitBtn.classList.contains('hidden')) submitAnswer();
    });

    // Start
    initializeQuiz();
  </script>
</body>
</html>
